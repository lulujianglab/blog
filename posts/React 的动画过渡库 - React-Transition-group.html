<!DOCTYPE html>
<html>
  <head>
    <title>React çš„åŠ¨ç”»è¿‡æ¸¡åº“ - React-Transition-group - lulujianglab Blog</title>
    <link href="../assets/common.css" rel="stylesheet"></link>
    <link href="../assets/hl.css" rel="stylesheet"></link>
    <link href="../assets/font.css" rel="stylesheet"></link>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  </head>
  <body>
    <div class="wrapper">
      <div class="title-wrapper">
          <h1 class="title">React çš„åŠ¨ç”»è¿‡æ¸¡åº“ - React-Transition-group</h1>
          <p class="post-date">2019-03-22</p>
      </div>
      <div class="content" id="content">
        <div class="main" id="main">
          <p>åœ¨å¼€å‘ä¸­å®ç°åŠ¨ç”»çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸ç®¡æ˜¯ <code>react</code> è¿˜æ˜¯ <code>vue</code> éƒ½æœ‰å¼€æºçš„åŠ¨ç”»ç»„ä»¶åº“æ¥æ›´åŠ æ–¹ä¾¿çš„åŠ¨ç”»å®ç°æ•ˆæœ</p>
<p>react åŠ¨ç”»ç»„ä»¶åº“æ˜¯ <code>React-Transition-group</code>ï¼Œåœ¨è¯´è¿™ä¸ªç»„ä»¶åº“ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å€ŸåŠ© CSS3 å®ç°æœ€åŸºæœ¬çš„åŠ¨ç”»æ ·å¼</p>
<h1>CSS3 å®ç°åŠ¨ç”»æ ·å¼</h1>
<pre class="hljs"><code><span class="hljs-keyword">constructor</span>(props) {
  <span class="hljs-keyword">super</span>(props)
  <span class="hljs-keyword">this</span>.state = {
    <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>
  }
  <span class="hljs-keyword">this</span>.handleToggle = <span class="hljs-keyword">this</span>.handleToggle.bind(<span class="hljs-keyword">this</span>)
}

render() {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{this.state.show</span> ? '<span class="hljs-attr">show</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">hide</span>'}&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleToggle}</span>&gt;</span>toggle<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>
  );
}

handleToggle() {
  <span class="hljs-keyword">this</span>.setState({
    <span class="hljs-attr">show</span>: <span class="hljs-keyword">this</span>.state.show ? <span class="hljs-literal">false</span> : <span class="hljs-literal">true</span>
  })
}
</code></pre>
<pre class="hljs"><code><span class="hljs-selector-class">.show</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">1s</span> ease-in;
}

<span class="hljs-selector-class">.hide</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">1s</span> ease-in;
}
</code></pre>
<p>è¿™æ ·åœ¨æµè§ˆå™¨ä¸­é€šè¿‡æ§åˆ¶ toggleï¼Œå°±å¯ä»¥çœ‹åˆ° hello è‹¥éšè‹¥ç°äº†ï¼Œå°±å€ŸåŠ©äº† CSS3 å®ç°äº†æœ€åŸºæœ¬çš„åŠ¨ç”»æ ·å¼</p>
<h1>ä½¿ç”¨ react-transition-group å®ç°åŠ¨ç”»</h1>
<p>åœ¨ github ä¸­æœç´¢ <code>react-transition-group</code> ,å¯ä»¥çœ‹åˆ° star æœ€å¤šçš„é¡¹ç›®ï¼Œå°±æ˜¯ <a href="https://github.com/reactjs/react-transition-group">react-transition-group</a></p>
<p>å…ˆå®‰è£…ä¾èµ– <code>npm install react-transition-group --save</code></p>
<p>ç„¶ååœ¨é¡¹ç›®ä¸­å¼•å…¥ <code>import { CSSTransition } from 'react-transition-group'</code></p>
<p>å¯ä»¥çœ‹åˆ°å®˜ç½‘çš„<a href="https://reactcommunity.org/react-transition-group/css-transition">demo</a></p>
<blockquote>
<p><code>classNames=&quot;fade&quot; applies fade-enter, fade-enter-active, fade-enter-done, fade-exit, fade-exit-active, fade-exit-done, fade-appear, and fade-appear-active</code>.</p>
</blockquote>
<h1>Transition</h1>
<p>è¿‡æ¸¡ç»„ä»¶ ( <code>Transiton</code> ) å…è®¸æ‚¨ç”¨ä¸€ä¸ªç®€å•çš„å£°æ˜æ€§ API æè¿°éšç€æ—¶é—´çš„æ¨ç§»ä»ä¸€ä¸ªç»„ä»¶çŠ¶æ€åˆ°å¦ä¸€ä¸ªç»„ä»¶çŠ¶æ€çš„è½¬æ¢</p>
<p>é»˜è®¤å±•ç¤ºç»„ä»¶æŸä¸ªç‰¹å®šçŠ¶æ€çš„æ ·å¼ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ¸å˜åŠ¨ç”»</p>
<pre class="hljs"><code>&lt;Transition
  <span class="hljs-keyword">in</span>={<span class="hljs-keyword">this</span>.state.show}
  timeout={<span class="hljs-number">1000</span>}
  <span class="hljs-comment">// unmountOnExit</span>
&gt;
  {state=&gt;{
    <span class="hljs-keyword">if</span>(state === <span class="hljs-string">'entering'</span> || state === <span class="hljs-string">'entered'</span>)
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"on"</span>&gt;</span>{state}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    <span class="hljs-keyword">else</span> 
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"off"</span>&gt;</span>{state}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  }}
&lt;<span class="hljs-regexp">/Transition&gt;
&lt;button onClick={this.handleAddItem}&gt;toggle {`${this.state.show}`}&lt;/</span>button&gt;
</code></pre>
<p><code>Transition</code> ä¸­é—´ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å±æ€§ children ï¼Œå¹¶è·å¾—ä¸€ä¸ªå‚æ•° state,</p>
<p>state åŒ…å«äº†å†…éƒ¨ç»„ä»¶çš„ <code>transition</code> çŠ¶æ€ï¼Œåˆ†åˆ«æœ‰</p>
<ul>
<li><code>entering</code></li>
<li><code>entered</code></li>
<li><code>exiting</code></li>
<li><code>exited</code></li>
<li><code>unmounted</code></li>
</ul>
<p>ä¸Šè¿° ğŸŒ° çš„æ„æ€å¯ä»¥ç†è§£ä¸º</p>
<p>ä½ è®¾ç½®çš„æ—¶é—´æ˜¯ 1000msï¼Œå½“ in ä» false å˜æˆ true çš„æ—¶å€™ï¼Œ æ˜¾ç¤º <code>&lt;div className=&quot;on&quot;&gt;{state}&lt;/div&gt;</code>ï¼ˆ  <code>entering</code> å’Œ <code>entered</code> çš„çŠ¶æ€ ï¼‰, ç›¸åçš„ï¼Œå½“ in ä» true å˜æˆ false çš„æ—¶å€™ï¼Œ1000ms ä¹‹å, åˆ‡æ¢åˆ° <code>&lt;div className=&quot;off&quot;&gt;{state}&lt;/div&gt;</code>ï¼ˆ <code>exiting</code> å’Œ <code>exited</code> çš„çŠ¶æ€ ï¼‰</p>
<h2>è¿è¡ŒåŸç†</h2>
<p>ä»å¤´æ¥çœ‹ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œè·ŸåŠ¨ç”»æ²¡ä»€ä¹ˆå…³ç³»ï¼Œæ‰€ä»¥å®ƒçš„åå­—ä¹Ÿæ˜¯å« <code>Transition</code></p>
<p>æœ‰ç‚¹åƒè·¯ç”±ï¼Œåœ¨ä¸åŒçš„ç»„ä»¶ä¸­é€‰æ‹©ä¸€ä¸ªæ¸²æŸ“ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå®ƒåªæœ‰4ä¸ªè·¯ç”±é€‰é¡¹:</p>
<p>è¿›å…¥ ( in === true )æ—¶ï¼Œurl æ˜¯ <code>entering</code>ï¼Œ1000ms åï¼Œurl å˜æˆ <code>entered</code></p>
<p>é€€å‡º ( in ===false ) æ—¶ï¼Œurl æ˜¯ <code>exiting</code>ï¼Œ1000ms åï¼Œurl å˜æˆ <code>exited</code></p>
<p>ç„¶ååŠ ä¸Š css <code>ease-in-out</code> å°±æˆäº†åŠ¨ç”»</p>
<h1>CSSTransition</h1>
<p>å±•ç¤ºç»„ä»¶ä»çŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€çš„åŠ¨æ€å˜åŒ–ï¼Œéœ€è¦å®šä¹‰ className å’Œç›¸å…³æ ·å¼</p>
<p>æœ€å¸¸ç”¨çš„æ˜¯ç”¨æ¥åŠ¨ç”»ä¸€ä¸ªç»„ä»¶çš„å®‰è£…å’Œå¸è½½ï¼Œä½†ä¹Ÿå¯ä»¥ç”¨æ¥æè¿°åœ¨é€‚å½“çš„è¿‡æ¸¡çŠ¶æ€</p>
<p>å¯ä»¥å°†æˆ‘ä»¬ä¹‹å‰ç”¨ CSS3 å†™çš„æ ·å¼ä¿®æ”¹ä¸º</p>
<pre class="hljs"><code>render() {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CSSTransition</span>
        <span class="hljs-attr">in</span>=<span class="hljs-string">{this.state.show}</span>
        <span class="hljs-attr">timeout</span>=<span class="hljs-string">{1000}</span>
        // å‰ç¼€åæ³¨æ„<span class="hljs-attr">S</span>
        <span class="hljs-attr">classNames</span>=<span class="hljs-string">'fade'</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">CSSTransition</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleToggle}</span>&gt;</span>toggle<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>
  )
}

handleToggle() {
  <span class="hljs-keyword">this</span>.setState({
    <span class="hljs-attr">show</span>: <span class="hljs-keyword">this</span>.state.show ? <span class="hljs-literal">false</span> : <span class="hljs-literal">true</span>
  })
}
</code></pre>
<pre class="hljs"><code>
<span class="hljs-selector-class">.fade-enter</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.fade-enter-active</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in;
}

<span class="hljs-comment">/* å…¥åœºåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œä¿æŒçŠ¶æ€ */</span>
<span class="hljs-selector-class">.fade-enter-done</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-selector-class">.fade-exit</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-selector-class">.fade-exit-active</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in;
}

<span class="hljs-selector-class">.fade-exit-done</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥å®ç°å’Œä¹‹å‰ç›¸åŒçš„åŠ¨ç”»æ•ˆæœäº†</p>
<p>å’‹ä¸€çœ‹è™½ç„¶ç¨å¾®å¤æ‚äº†ç‚¹ï¼Œä½†æ˜¯å®ƒå¯ä»¥å¸¦ç»™æˆ‘ä»¬å¾ˆå¤šæ–°çš„ç‰¹æ•ˆ</p>
<p>æ¯”å¦‚å‚æ•° <code>in</code> æ˜¯ <code>true</code> or <code>false</code>ï¼Œä»£è¡¨äº†æ˜¯â€™æ·¡å…¥â€™çŠ¶æ€ï¼Œè¿˜æ˜¯â€™æ·¡å‡ºâ€™çŠ¶æ€</p>
<p><code>timeout</code> ä»£è¡¨äº†æ•´ä¸ªçš„æŒç»­æ—¶é—´</p>
<p><code>unmountOnExit</code> å±æ€§ï¼Œæ·»åŠ åˆ°ä»£ç ä¸­ï¼Œä¼šå‘ç°å½“æˆ‘ä»¬ç‚¹éšè—çš„æ—¶å€™ï¼Œå¯¹åº”çš„ DOM è¢«ç§»å‡ºäº†ï¼Œç‚¹æ˜¾ç¤ºçš„æ—¶å€™ï¼ŒDOM åˆå‡ºæ¥äº†</p>
<p>å€ŸåŠ© <code>react-transition-group</code> è¿™ä¸ªåº“ï¼Œå®ç°èµ·æ¥éå¸¸ç®€å•</p>
<p>ç»§ç»­çœ‹å®ƒçš„<a href="https://reactcommunity.org/react-transition-group/css-transition">æ–‡æ¡£</a>ï¼Œè¿™ä¸ªåº“æä¾›äº†å¾ˆå¤šé’©å­å‡½æ•°</p>
<p><img src="https://user-images.githubusercontent.com/26807227/49338677-9d870e00-f65f-11e8-82e0-91b81aaa7202.png" alt="image"></p>
<p>å‡è®¾å½“è¿™ä¸ª hello æ˜¾ç¤ºå‡ºæ¥ä¹‹åï¼Œå¸Œæœ›å®ƒçš„é¢œè‰²èƒ½å˜æˆçº¢è‰²,ç°åœ¨å®ç°å°±å˜å¾—å¾ˆç®€å•äº†</p>
<p>åªéœ€è¦åœ¨å…¥åœºåŠ¨ç”»ç»“æŸä¹‹åï¼Œå°† color å˜æˆ red</p>
<pre class="hljs"><code><span class="hljs-selector-class">.fade-enter-done</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">color</span>: red
}
</code></pre>
<p>è¿˜å¯ä»¥ç”¨ js çš„æ–¹å¼æ¥å®ç°ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>åœ¨ <code>CSSTransition</code> ç»„ä»¶ä¸­æ·»åŠ ä¸€ä¸ªé’©å­<code>onEntered</code></p>
<pre class="hljs"><code>&lt;CSSTransition
  <span class="hljs-keyword">in</span>={<span class="hljs-keyword">this</span>.state.show}
  timeout={<span class="hljs-number">1000</span>}
  classNames=<span class="hljs-string">'fade'</span>
  unmountOnExit
  onEntered={(el) =&gt; {el.style.color=<span class="hljs-string">'blue'</span>}}
&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">CSSTransition</span>&gt;</span></span>
</code></pre>
<p>é’©å­å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œå°±æ˜¯åœ¨æŸä¸ªæ—¶åˆ»ä¼šè‡ªåŠ¨æ‰§è¡Œçš„å‡½æ•°</p>
<p><code>onEntered</code> é’©å­ä»€ä¹ˆæ—¶å€™ä¼šè‡ªåŠ¨æ‰§è¡Œå‘¢ï¼Ÿå°±æ˜¯å½“å…¥åœºåŠ¨ç”»ç»“æŸä¹‹åï¼Œå°±ä¼šè¢«æ‰§è¡Œ</p>
<p><code>el</code> å°±æ˜¯æŒ‡çš„å†…éƒ¨çš„ <code>div</code> å…ƒç´ </p>
<p>å¦‚æœå¸Œæœ›ç¬¬ä¸€æ¬¡å±•ç¤ºçš„æ—¶å€™ä¹Ÿæœ‰åŠ¨ç”»æ•ˆæœï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>åŒæ ·ä¹Ÿéœ€è¦åœ¨ <code>CSSTransition</code> ç»„ä»¶ä¸­æ·»åŠ ä¸€ä¸ª <code>appear={true}</code> ,åŒæ—¶åœ¨å…¥åœºåŠ¨ç”»çš„ç¬¬ä¸€å¸§æ·»åŠ  <code>fade-appear</code> ,åŒæ—¶åœ¨å…¥åœºåŠ¨ç”»çš„ç¬¬äºŒå¸§ä»¥åŠæ•´ä¸ªè¿‡ç¨‹ä¸­æ·»åŠ  <code>fade-appear-active</code></p>
<pre class="hljs"><code><span class="hljs-comment">/* enteræ˜¯å…¥åœºå‰çš„åˆ¹é‚£ï¼ˆç‚¹å‡»æŒ‰é’®ï¼‰ï¼ŒappearæŒ‡é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½å‰çš„ä¸€åˆ¹é‚£ï¼ˆè‡ªåŠ¨ï¼‰ */</span>
<span class="hljs-selector-class">.fade-enter</span>, <span class="hljs-selector-class">.fade-appear</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* enter-activeæŒ‡å…¥åœºååˆ°å…¥åœºç»“æŸçš„è¿‡ç¨‹ï¼Œappear-activeåˆ™æ˜¯é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½è‡ªåŠ¨æ‰§è¡Œ */</span>
<span class="hljs-selector-class">.fade-enter-active</span>, <span class="hljs-selector-class">.fade-appear-active</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">1s</span> ease-in;
}
</code></pre>
<p>è¿™äº›ä¹Ÿå°±æ˜¯ <code>react-transition-group</code> è¿™ä¸ªåº“æ¯”è¾ƒæ ¸å¿ƒçš„å†…å®¹ï¼Œå…¶ä»–æ›´å¤æ‚çš„æ–¹æ³•å¯ä»¥æŸ¥é˜… <a href="https://reactcommunity.org/react-transition-group/transition">Transition</a></p>
<h1>TransitionGroup</h1>
<p>å¦‚æœè¦åšå¤šä¸ªå…ƒç´ çš„åŠ¨ç”»åˆ‡æ¢å‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ° <a href="https://reactcommunity.org/react-transition-group/transition-group">TransitionGroup</a></p>
<p><code>TransitionGroup</code> å®é™…ä¸Šå°±æ˜¯å®ç°å¤šä¸ªTransition æˆ–è€…CSSTransitionç»„åˆçš„æ•ˆæœ</p>
<p>ç”¨æ¥ç®¡ç†ä¸€äº›åˆ—ç»„ä»¶çš„åŠ¨ç”»ï¼Œä¾‹å¦‚åˆ—è¡¨</p>
<p>é¦–å…ˆå¼•å…¥è¿™ä¸ªç»„ä»¶ <code>import TransitionGroup from 'react-transition-group'</code></p>
<pre class="hljs"><code><span class="hljs-keyword">constructor</span>(props) {
  <span class="hljs-keyword">super</span>(props)
  <span class="hljs-keyword">this</span>.state = {
    <span class="hljs-attr">data</span>: []
  }
  <span class="hljs-keyword">this</span>.handleAddItem = <span class="hljs-keyword">this</span>.handleAddItem.bind(<span class="hljs-keyword">this</span>)
}

render() {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Fragment</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TransitionGroup</span>&gt;</span>
      {
        this.state.data.map((item, index) =&gt; {
          return (
            <span class="hljs-tag">&lt;<span class="hljs-name">CSSTransition</span>
              <span class="hljs-attr">timeout</span>=<span class="hljs-string">{1000}</span>
              <span class="hljs-attr">classNames</span>=<span class="hljs-string">'fade'</span>
              <span class="hljs-attr">unmountOnExit</span>
              <span class="hljs-attr">onEntered</span>=<span class="hljs-string">{(el)</span> =&gt;</span> {el.style.color='blue'}}
              appear={true}
              key={index}
            &gt;
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{item}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">CSSTransition</span>&gt;</span>
          )
        })
      }
      <span class="hljs-tag">&lt;/<span class="hljs-name">TransitionGroup</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleAddItem}</span>&gt;</span>toggle<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Fragment</span>&gt;</span></span>
  )
}

handleAddItem() {
  <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">data</span>: [...prevState.data, <span class="hljs-string">'item'</span>]
    }
  })
}
</code></pre>
<p>è¿™æ ·é…åˆ <code>TransitionGroup</code> å’Œ <code>CSSTransition</code> å°±å¯ä»¥è¿›è¡Œå¤šä¸ªå…ƒç´ æˆ–è€…ç»„ä»¶åˆ‡æ¢è¿™æ ·çš„åŠ¨ç”»æ•ˆæœäº†</p>
<h1>å®Œæ•´ä»£ç </h1>
<p><a href="https://github.com/lulujianglab/react-todolist-transition/tree/master/transition-react"> transition åŠ¨ç”»</a></p>

        </div>
        <div class="footer">
          Powered by <a href="https://github.com/lulujianglab/pudding/tree/dev">PuddingNote</a>
        </div>
      </div>
      <div class="toc_nav">
        <div class="article_nav" id="article_nav">
        </div>
      </div>
      <div class="scroll post-top" id="top">
        <a href="javascript:void(0)" onclick="toBackTop()">
          <i class="iconfont icon-shangsanjiaoxing"></i>
        </a>
      </div>
      <div class="scroll back">
        <a href="../../">
          <i class="iconfont icon-shouye"></i>
        </a>
      </div>
    </div>

    <script>
      function toBackTop(){
        document.documentElement.scrollTop = 0
      }

      function onScrollToTop() {
        let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
        // å›åˆ°é¡¶éƒ¨
        if (scrollTop > 300) {
          document.getElementById("top").style.display = 'block'
        } else {
          document.getElementById("top").style.display = 'none'
        }
        // å¯¼èˆªç›®å½•
        if(scrollTop > 100) {
          var navNode = document.querySelector('#article_nav')
          navNode.style.position = 'fixed'
          navNode.style.top = '16px'
        } else {
          var navNode = document.querySelector('#article_nav')
          navNode.style.position = ''
          navNode.style.top = ''
        }
      }

      function addAchor() {
        var allNodes = document.getElementById('main').childNodes
        // var nodesH =  [...allNodes].map((item, index) => {
        //   if(item.tagName && item.tagName.substr(0,1).toUpperCase() === "H") {
        //     return item.tagName
        //   }
        // })
        var mapNodes = [...allNodes].forEach((item, index) => {
          if(item.tagName && item.tagName.substr(0,1).toUpperCase() === "H") {
            var contentH = item.innerHTML // æ ‡é¢˜å†…å®¹
            var menuid = "menu-" + item.tagName + "-" + index.toString() // å¢åŠ å½“å‰å…ƒç´ çš„id
            item.setAttribute('id',menuid)
            var spaceNum = ''
            if (item.tagName === 'H1') {
              spaceNum = ''
            } else if (item.tagName === 'H2') {
              spaceNum = '&nbsp;&nbsp;&nbsp;&nbsp;'
            }  else if (item.tagName === 'H3') {
              spaceNum = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'
            } else if (item.tagName === 'H4') {
              spaceNum = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'
            } else if (item.tagName === 'H5') {
              spaceNum = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'
            } else if (item.tagName === 'H6') {
              spaceNum = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'
            }
            var node = document.createElement('a')
            node.setAttribute('href','#' + menuid)
            node.setAttribute('class', item.tagName)
            node.innerHTML = spaceNum + contentH
            document.getElementById('article_nav').appendChild(node) // å°†æ–°åˆ›å»ºçš„ç›®å½•èŠ‚ç‚¹æ’å…¥å¯¼èˆªæ 
          }
        })
      }

      window.onscroll = onScrollToTop

      window.onload = function() {
        addAchor()
      }
    </script>
  </body>
</html>